<!DOCTYPE html>
<html>
<title>TT Portal</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="keywords" content="">
<meta name="description" content="">

<link rel="icon" type="image/png" href="favicon.png" />
<!--[if IE]><link rel="shortcut icon" type="image/x-icon" href="favicon.ico" /><![endif]-->

<link rel="stylesheet" href="w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

<script>
    $(document).ready(function() {
        $("#navScoresMob").click(function() {
            $("#navBarDropScoresMob").toggle("slow", function() {});
            $("#navBarDropProfileMob").hide("slow", function() {});
            $("#navBarDropInfoMob").hide("slow", function() {});
        });
        $("#navProfileMob").click(function() {
            $("#navBarDropProfileMob").toggle("slow", function() {});
            $("#navBarDropScoresMob").hide("slow", function() {});
            $("#navBarDropInfoMob").hide("slow", function() {});
        });
        $("#navInfoMob").click(function() {
            $("#navBarDropInfoMob").toggle("slow", function() {});
            $("#navBarDropScoresMob").hide("slow", function() {});
            $("#navBarDropProfileMob").hide("slow", function() {});
        });
        if (localStorage.username) {
            //logged in
            $(".loginout").html("<i class='fa fa-sign-out'></i> Log Out");
            $(".navProfileName").html("<i class='fa fa-group'></i> " + localStorage.username + " <i class='fa fa-angle-down'></i>");
            $(".loggedin").show();
        } else {
            //Not logged in
            $(".loginout").html("<i class='fa fa-sign-out'></i> Log In");
            $(".navProfileName").html("<i class='fa fa-group'></i> Profile <i class='fa fa-angle-down'></i>");
            $(".loggedin").hide();
        }
    });

    function logInOut() {
        if (localStorage.username) {
            //logged in
            localStorage.removeItem('username');
            window.location.replace('/');
        } else {
            //Not logged in
            $('#loginPopOut').show();
        }
    }

    $.urlParam = function(name) {
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        return results[1] || 0;
    }

    window.onload = function() {
        var url = $.urlParam('id');
        var type = url.substring(0, 1);
        var id = url.substring(1);

        if (type == 't') {
            document.getElementById('viewDataIF').src = "teamResults?t=" + id;
        } else if (type == 'u') {
            document.getElementById('viewDataIF').src = "playerResults?u=" + id;
        }
        
        console.log(type + " " + id)
    };

    function resizeIframe(obj) {
        obj.style.height = 75 + obj.contentWindow.document.body.scrollHeight + 'px';
    }

</script>

<body>

    <!-- Navbar (sit on top) -->
    <div class="w3-top" style="z-index: 10">
        <div class="w3-bar w3-dark-grey w3-card-2" id="myNavbar">
            <!-- Mobile Left-sided name + nav opener -->
            <div class="w3-left w3-hide-large ">
                <a href="javascript:void(0)" class="w3-bar-item w3-button w3-hover-dark-grey" onclick="w3_open()">
                <i id="mobBars" class="fa fa-bars w3-large"></i><i id="mobClose" style="display: none" class="fa fa-close w3-large"></i>
            </a>
                <a href="/" class="w3-nav" style="margin-top: 2px"><i class="fa fa-home"></i> Table Tennis Portal (Plymouth)</a>
            </div>

            <!-- Left-sided name -->
            <div class="w3-left w3-hide-small w3-hide-medium">
                <a href="/" class="w3-nav"><i class="fa fa-home"></i> Table Tennis Local League Portal (Plymouth)</a>
            </div>
            <!-- Right-sided navbar links -->
            <div class="w3-right w3-hide-small w3-hide-medium" id="navBar">
                <div class="w3-dropdown-hover">
                    <a class="w3-nav w3-dark-grey"><i class="fa fa-info"></i> Info <i class="fa fa-angle-down"></i></a>
                    <div id="navBarDropInfo" class="navBarDrop w3-dropdown-content w3-dark-grey w3-card-2">
                        <a href="venues" class="w3-nav-drop"><i class="fa fa-map-marker"></i> Venues</a>
                        <a href="contacts" class="w3-nav-drop"><i class="fa fa-comments-o"></i> Contacts</a>
                        <a href="news" class="w3-nav-drop"><i class="fa fa-newspaper-o"></i> News</a>
                        <a href="rules" class="w3-nav-drop"><i class="fa fa-exclamation-circle"></i> League Rules</a>
                    </div>
                </div>
                <a href="averages" class="w3-nav"><i class="fa fa-table"></i> Averages</a>
                <a href="results" class="w3-nav"><i class="fa fa-table"></i> Results</a>
                <div class="w3-dropdown-hover">
                    <a class="w3-nav"><i class="fa fa-calendar-check-o"></i> Scores <i class="fa fa-angle-down"></i></a>
                    <div id="navBarDropScores" class="navBarDrop w3-dropdown-content w3-dark-grey w3-card-2">
                        <a href="submitscore" class="w3-nav-drop"><i class="fa fa-send"></i> Submit Score</a>
                        <a href="scoreboard" class="w3-nav-drop"><i class="fa fa-plus-circle"></i> Scoreboard</a>
                        <a href="mobileapps" class="w3-nav-drop"><i class="fa fa-mobile-phone"></i> Mobile Apps</a>
                    </div>
                </div>
                <div class="w3-dropdown-hover">
                    <a class="navProfileName w3-nav"><i class="fa fa-group"></i> Profile</a>
                    <div id="navBarDropProfile" class="navBarDrop w3-dropdown-content w3-dark-grey w3-card-2">
                        <a onclick="logInOut();" class="loginout w3-nav-drop"></a>
                        <a href="profile" class="loggedin w3-nav-drop"><i class="fa fa-pencil"></i> View Profile</a>
                        <a href="messages" class="loggedin w3-nav-drop"><i class="fa fa-comments"></i> Messages</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar on small screens when clicking the menu icon -->
    <nav class="w3-sidebar w3-bar-block w3-dark-grey w3-card-2 w3-animate-left w3-hide-large" style="display:none;z-index: 7" id="mySidebar">
        <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16"><i class="fa fa-close w3-large"></i> Close</a>
        <div id="mobNavBar">
            <a id="navInfoMob" style="text-decoration: none" class="w3-bar-item w3-button"><i class="fa fa-info"></i> Info <i class="fa fa-angle-down"></i></a>
            <div id="navBarDropInfoMob" style="display: none" class="w3-dark-grey w3-card-2">
                <a href="venues" class="w3-bar-item w3-button"><i class="fa fa-map-marker"></i> Venues</a>
                <a href="contacts" class="w3-bar-item w3-button"><i class="fa fa-comments-o"></i> Contacts</a>
                <a href="news" class="w3-bar-item w3-button"><i class="fa fa-newspaper-o"></i> News</a>
                <a href="rules" class="w3-bar-item w3-button"><i class="fa fa-exclamation-circle"></i> League Rules</a>
            </div>
            <a href="averages" class="w3-bar-item w3-button"><i class="fa fa-table"></i> Averages</a>
            <a href="results" class="w3-bar-item w3-button"><i class="fa fa-table"></i> Results</a>
            <a id="navScoresMob" style="text-decoration: none" class="w3-bar-item w3-button"><i class="fa fa-calendar-check-o"></i> Scores <i class="fa fa-angle-down"></i></a>
            <div id="navBarDropScoresMob" style="display: none" class="w3-dark-grey w3-card-2">
                <a href="submitscore" class="w3-bar-item w3-button"><i class="fa fa-send"></i> Submit Score</a>
                <a href="scoreboard" class="w3-bar-item w3-button"><i class="fa fa-plus-circle"></i> Scoreboard</a>
                <a href="mobileapps" class="w3-bar-item w3-button"><i class="fa fa-mobile-phone"></i> Mobile Apps</a>
            </div>
            <a id="navProfileMob" style="text-decoration: none" class="navProfileName w3-bar-item w3-button"></a>
            <div id="navBarDropProfileMob" style="display: none" class="w3-dark-grey w3-card-2">
                <a onclick="logInOut();" class="loginout w3-bar-item w3-button"></a>
                <a href="profile" class="loggedin w3-bar-item w3-button"><i class="fa fa-pencil"></i> View Profile</a>
                <a href="messages" class="loggedin w3-bar-item w3-button"><i class="fa fa-comments"></i> Messages</a>
            </div>
        </div>
    </nav>

    <div id="loginPopOut" style="z-index: 11" class="w3-modal">
        <div class="w3-modal-content w3-animate-top w3-card-4">
            <span onclick="$('#loginPopOut').hide()" style="z-index: 12" class="w3-button w3-red w3-hover-white w3-display-topright"><i class="w3-large fa fa-close"></i></span>
            <div class="w3-container w3-white">
                <iframe style="border: none;width: 100%;height:390px" src="/loginForm"></iframe>
            </div>
            <footer class="w3-container w3-red">
                <p class="w3-small">Forgotten username or password? Contact the League Secretary: <a href="mailto:secretary@plymttleague.co.uk?Subject=Forgotten%20Login%20Details">secretary@plymttleague.co.uk</a></p>
            </footer>
        </div>
    </div>

    <div class="w3-container w3-white w3-center" style="padding-top:75px">

        <iframe id="viewDataIF" style="border: none;width: 100%;" src="" onload="resizeIframe(this);"></iframe>

    </div>

    <script>
        // Toggle between showing and hiding the sidebar when clicking the menu icon
        var mySidebar = document.getElementById("mySidebar");

        function w3_open() {
            if (mySidebar.style.display === 'block') {
                mySidebar.style.display = 'none';
                $('#mobBars').show();
                $('#mobClose').hide();
            } else {
                mySidebar.style.display = 'block';
                $('#mobBars').hide();
                $('#mobClose').show();
            }
        }

        // Close the sidebar with the close button
        function w3_close() {
            mySidebar.style.display = "none";
            $('#mobBars').show();
            $('#mobClose').hide();
        }

    </script>
</body>

</html>
